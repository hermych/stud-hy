let español = {
  aria: {
    sortAscending: "Activar para ordenar la columna de manera ascendente",
    sortDescending: "Activar para ordenar la columna de manera descendente",
  },
  autoFill: {
    cancel: "Cancelar",
    fill: "Rellene todas las celdas con <i>%d</i>",
    fillHorizontal: "Rellenar celdas horizontalmente",
    fillVertical: "Rellenar celdas verticalmente",
  },
  buttons: {
    collection: "Colección",
    colvis: "Visibilidad",
    colvisRestore: "Restaurar visibilidad",
    copy: "Copiar",
    copyKeys:
      "Presione ctrl o u2318 + C para copiar los datos de la tabla al portapapeles del sistema. <br /> <br /> Para cancelar, haga clic en este mensaje o presione escape.",
    copySuccess: {
      1: "Copiada 1 fila al portapapeles",
      _: "Copiadas %d fila al portapapeles",
    },
    copyTitle: "Copiar al portapapeles",
    csv: "CSV",
    excel: "Excel",
    pageLength: {
      "-1": "Mostrar todas las filas",
      _: "Mostrar %d filas",
    },
    pdf: "PDF",
    print: "Imprimir",
    createState: "Crear Estado",
    removeAllStates: "Borrar Todos los Estados",
    removeState: "Borrar Estado",
    renameState: "Renombrar Estado",
    savedStates: "Guardar Estado",
    stateRestore: "Restaurar Estado",
    updateState: "Actualizar Estado",
  },
  infoThousands: ",",
  loadingRecords: "Cargando...",
  paginate: {
    first: "Primero",
    last: "Último",
    next: "Siguiente",
    previous: "Anterior",
  },
  processing: "Procesando...",
  search: "Buscar:",
  searchBuilder: {
    add: "Añadir condición",
    button: {
      0: "Constructor de búsqueda",
      _: "Constructor de búsqueda (%d)",
    },
    clearAll: "Borrar todo",
    condition: "Condición",
    deleteTitle: "Eliminar regla de filtrado",
    leftTitle: "Criterios anulados",
    logicAnd: "Y",
    logicOr: "O",
    rightTitle: "Criterios de sangría",
    title: {
      0: "Constructor de búsqueda",
      _: "Constructor de búsqueda (%d)",
    },
    value: "Valor",
    conditions: {
      date: {
        after: "Después",
        before: "Antes",
        between: "Entre",
        empty: "Vacío",
        equals: "Igual a",
        not: "Diferente de",
        notBetween: "No entre",
        notEmpty: "No vacío",
      },
      number: {
        between: "Entre",
        empty: "Vacío",
        equals: "Igual a",
        gt: "Mayor a",
        gte: "Mayor o igual a",
        lt: "Menor que",
        lte: "Menor o igual a",
        not: "Diferente de",
        notBetween: "No entre",
        notEmpty: "No vacío",
      },
      string: {
        contains: "Contiene",
        empty: "Vacío",
        endsWith: "Termina con",
        equals: "Igual a",
        not: "Diferente de",
        startsWith: "Inicia con",
        notEmpty: "No vacío",
        notContains: "No Contiene",
        notEnds: "No Termina",
        notStarts: "No Comienza",
      },
      array: {
        equals: "Igual a",
        empty: "Vacío",
        contains: "Contiene",
        not: "Diferente",
        notEmpty: "No vacío",
        without: "Sin",
      },
    },
    data: "Datos",
  },
  searchPanes: {
    clearMessage: "Borrar todo",
    collapse: {
      0: "Paneles de búsqueda",
      _: "Paneles de búsqueda (%d)",
    },
    count: "{total}",
    emptyPanes: "Sin paneles de búsqueda",
    loadMessage: "Cargando paneles de búsqueda",
    title: "Filtros Activos - %d",
    countFiltered: "{shown} ({total})",
    collapseMessage: "Colapsar",
    showMessage: "Mostrar Todo",
  },
  select: {
    cells: {
      1: "1 celda seleccionada",
      _: "%d celdas seleccionadas",
    },
    columns: {
      1: "1 columna seleccionada",
      _: "%d columnas seleccionadas",
    },
  },
  thousands: ",",
  datetime: {
    previous: "Anterior",
    hours: "Horas",
    minutes: "Minutos",
    seconds: "Segundos",
    unknown: "-",
    amPm: ["am", "pm"],
    next: "Siguiente",
    months: {
      0: "Enero",
      1: "Febrero",
      10: "Noviembre",
      11: "Diciembre",
      2: "Marzo",
      3: "Abril",
      4: "Mayo",
      5: "Junio",
      6: "Julio",
      7: "Agosto",
      8: "Septiembre",
      9: "Octubre",
    },
    weekdays: [
      "Domingo",
      "Lunes",
      "Martes",
      "Miércoles",
      "Jueves",
      "Viernes",
      "Sábado",
    ],
  },
  editor: {
    close: "Cerrar",
    create: {
      button: "Nuevo",
      title: "Crear Nuevo Registro",
      submit: "Crear",
    },
    edit: {
      button: "Editar",
      title: "Editar Registro",
      submit: "Actualizar",
    },
    remove: {
      button: "Eliminar",
      title: "Eliminar Registro",
      submit: "Eliminar",
      confirm: {
        _: "¿Está seguro que desea eliminar %d filas?",
        1: "¿Está seguro que desea eliminar 1 fila?",
      },
    },
    multi: {
      title: "Múltiples Valores",
      restore: "Deshacer Cambios",
      noMulti:
        "Este registro puede ser editado individualmente, pero no como parte de un grupo.",
      info: "Los elementos seleccionados contienen diferentes valores para este registro. Para editar y establecer todos los elementos de este registro con el mismo valor, haga click o toque aquí, de lo contrario conservarán sus valores individuales.",
    },
    error: {
      system:
        'Ha ocurrido un error en el sistema (<a target="\\" rel="\\ nofollow" href="\\"> Más información</a>).',
    },
  },
  decimal: ".",
  emptyTable: "No hay datos disponibles en la tabla",
  zeroRecords: "No se encontraron coincidencias",
  info: "Mostrando _START_ a _END_ de _TOTAL_ entradas",
  infoEmpty: "Mostrando 0 a 0 de 0 entradas",
  infoFiltered: "(Filtrado de _MAX_ total de entradas)",
  lengthMenu: "Mostrar _MENU_ entradas",
  stateRestore: {
    removeTitle: "Eliminar",
    creationModal: {
      search: "Busccar",
    },
  },
};

// *********** FUNCIONES **************
function validarDatos(datos) {
  respuesta = {};
  datos.forEach((dato) => {
    if (dato.value == "" || dato.value == "0") {
      respuesta[dato.name] = `El campo ${dato.name} es obligatorio`;
    }
    if (dato.name == "dniContacto") {
      if (dato.value.length != 8) {
        respuesta[dato.name] = `El DNI de contacto tiene que ser 8 digitos`;
      }
    }
  });
  return respuesta;
}
function validarInputSoloNumeros(evt) {
  let code = evt.which ? evt.which : evt.keyCode;
  if (code == 8) {
    // backspace.
    return true;
  } else if (code >= 48 && code <= 57) {
    // is a number.
    return true;
  } else {
    // other keys.
    return false;
  }
}
$("#btnModalRegistrarFacu").click(() => {
  window.$.ajax({
    type: "GET",
    url: "UniversidadController.php?method=universidadGListActivos",
    success: function (response) {
      let universidades = JSON.parse(response);
      contenido = "<option value='0'>--- Universidad ---</option>";
      universidades.forEach((depa) => {
        contenido += `<option value=${depa.id_universidad}>${depa.nombre}</option>`;
      });
      $("#univ").html(contenido);
    },
  });
});
$("#univ").change(function () {
  if ($("#univ").val() != "0") {
    $("#univ").removeClass("border border-danger");
    $("#univ").addClass("border border-success");
    $("#facu").prop("disabled", false);
    formData = new FormData();
    formData.append("id_univ", $("#univ").val());
    window.$.ajax({
      type: "post",
      url: "FacultadController.php?method=facultadGListEspecifico",
      data: formData,
      cache: false,
      processData: false,
      contentType: false,
      success: function (response) {
        let facultades = JSON.parse(response);
        console.log(facultades);
        contenido = "<option value='0'>--- Facultad ---</option>";
        facultades.forEach((depa) => {
          contenido += `<option value=${depa.id_facultad}>${depa.nombre}</option>`;
        });
        $("#facu").html(contenido);
      },
    });
  } else {
    $("#univ").removeClass("border border-success");
    $("#univ").addClass("border border-danger");
    $("#facu").removeClass("border border-success");
    $("#facu").addClass("border border-danger");
    $("#facu").prop("disabled", true);
    $("#facu").val("0");
  }
});
$("#facu").change(function () {
  if ($("#facu").val() != "0") {
    $("#facu").removeClass("border border-danger");
    $("#facu").addClass("border border-success");
  } else {
    $("#facu").removeClass("border border-success");
    $("#facu").addClass("border border-danger");
  }
});
$("#nombre").keyup(function () {
  if ($("#nombre").val().length > 5) {
    $("#nombre").removeClass("border border-danger");
    $("#nombre").addClass("border border-success");
  } else {
    $("#nombre").removeClass("border border-success");
    $("#nombre").addClass("border border-danger");
  }
});
$("#duracion").keyup(function () {
  if ($("#duracion").val().length >= 1) {
    $("#duracion").removeClass("border border-danger");
    $("#duracion").addClass("border border-success");
  } else {
    $("#duracion").removeClass("border border-success");
    $("#duracion").addClass("border border-danger");
  }
});
$("#grado").keyup(function () {
  if ($("#grado").val().length > 5) {
    $("#grado").removeClass("border border-danger");
    $("#grado").addClass("border border-success");
  } else {
    $("#grado").removeClass("border border-success");
    $("#grado").addClass("border border-danger");
  }
});
$("#titulo").keyup(function () {
  if ($("#titulo").val().length > 5) {
    $("#titulo").removeClass("border border-danger");
    $("#titulo").addClass("border border-success");
  } else {
    $("#titulo").removeClass("border border-success");
    $("#titulo").addClass("border border-danger");
  }
});
$("#descripcion").keyup(function () {
  if ($("#descripcion").val().length > 5) {
    $("#descripcion").removeClass("border border-danger");
    $("#descripcion").addClass("border border-success");
  } else {
    $("#descripcion").removeClass("border border-success");
    $("#descripcion").addClass("border border-danger");
  }
});
$("#perfil").keyup(function () {
  if ($("#perfil").val().length > 5) {
    $("#perfil").removeClass("border border-danger");
    $("#perfil").addClass("border border-success");
  } else {
    $("#perfil").removeClass("border border-success");
    $("#perfil").addClass("border border-danger");
  }
});
$("#planEstudio").change(function () {
  if ($("#planEstudio").val() != "") {
    $("#divPlan").removeClass("border border-warning");
    $("#divPlan").addClass("border border-success");
  } else {
    $("#divPlan").removeClass("border border-success");
    $("#divPlan").addClass("border border-warning");
  }
});
// editar
$("#univEdit").change(function () {
  if ($("#univEdit").val() != "0") {
    $("#univEdit").removeClass("border border-danger");
    $("#univEdit").addClass("border border-success");
  } else {
    $("#univEdit").removeClass("border border-success");
    $("#univEdit").addClass("border border-danger");
  }
});
$("#univEdit").change(function () {
  if ($("#univEdit").val() != "0") {
    $("#univEdit").removeClass("border border-danger");
    $("#univEdit").addClass("border border-success");
    $("#facuEdit").prop("disabled", false);
    formData = new FormData();
    formData.append("id_univ", $("#univEdit").val());
    window.$.ajax({
      type: "post",
      url: "FacultadController.php?method=facultadGListEspecifico",
      data: formData,
      cache: false,
      processData: false,
      contentType: false,
      success: function (response) {
        let facultades = JSON.parse(response);
        contenido = "<option value='0' selected>--- Facultad ---</option>";
        facultades.forEach((depa) => {
          contenido += `<option value=${depa.id_facultad}>${depa.nombre}</option>`;
        });
        $("#facuEdit").html(contenido);
        $("#facuEdit").removeClass("border border-success");
        $("#facuEdit").addClass("border border-danger");
      },
    });
  } else {
    $("#univEdit").removeClass("border border-success");
    $("#univEdit").addClass("border border-danger");
    $("#facuEdit").removeClass("border border-success");
    $("#facuEdit").addClass("border border-danger");
    $("#facuEdit").prop("disabled", true);
    $("#facuEdit").val("0");
  }
});
$("#facuEdit").change(function () {
  if ($("#facuEdit").val() != "0") {
    $("#facuEdit").removeClass("border border-danger");
    $("#facuEdit").addClass("border border-success");
  } else {
    $("#facuEdit").removeClass("border border-success");
    $("#facuEdit").addClass("border border-danger");
  }
});
$("#nombreEdit").keyup(function () {
  if ($("#nombreEdit").val().length > 5) {
    $("#nombreEdit").removeClass("border border-danger");
    $("#nombreEdit").addClass("border border-success");
  } else {
    $("#nombreEdit").removeClass("border border-success");
    $("#nombreEdit").addClass("border border-danger");
  }
});
$("#duracionEdit").keyup(function () {
  if ($("#duracionEdit").val().length >= 1) {
    $("#duracionEdit").removeClass("border border-danger");
    $("#duracionEdit").addClass("border border-success");
  } else {
    $("#duracionEdit").removeClass("border border-success");
    $("#duracionEdit").addClass("border border-danger");
  }
});
$("#gradoEdit").keyup(function () {
  if ($("#gradoEdit").val().length > 5) {
    $("#gradoEdit").removeClass("border border-danger");
    $("#gradoEdit").addClass("border border-success");
  } else {
    $("#gradoEdit").removeClass("border border-success");
    $("#gradoEdit").addClass("border border-danger");
  }
});
$("#tituloEdit").keyup(function () {
  if ($("#tituloEdit").val().length > 5) {
    $("#tituloEdit").removeClass("border border-danger");
    $("#tituloEdit").addClass("border border-success");
  } else {
    $("#tituloEdit").removeClass("border border-success");
    $("#tituloEdit").addClass("border border-danger");
  }
});
$("#descripcionEdit").keyup(function () {
  if ($("#descripcionEdit").val().length > 5) {
    $("#descripcionEdit").removeClass("border border-danger");
    $("#descripcionEdit").addClass("border border-success");
  } else {
    $("#descripcionEdit").removeClass("border border-success");
    $("#descripcionEdit").addClass("border border-danger");
  }
});
$("#perfilEdit").keyup(function () {
  if ($("#perfilEdit").val().length > 5) {
    $("#perfilEdit").removeClass("border border-danger");
    $("#perfilEdit").addClass("border border-success");
  } else {
    $("#perfilEdit").removeClass("border border-success");
    $("#perfilEdit").addClass("border border-danger");
  }
});
$("#planEstudioEdit").change(function () {
  if ($("#planEstudioEdit").val() != "") {
    $("#divPlanEdit").removeClass("border border-warning");
    $("#divPlanEdit").addClass("border border-success");
  } else {
    $("#divPlanEdit").removeClass("border border-success");
    $("#divPlanEdit").addClass("border border-warning");
  }
});
// ###############################################

// ********** VALIDAR BOTON - MODAL - REGISTRAR **************
setInterval(() => {
  if (
    $("#univ").hasClass("border-danger") ||
    $("#facu").hasClass("border-danger") ||
    $("#nombre").hasClass("border-danger") ||
    $("#duracion").hasClass("border-danger") ||
    $("#grado").hasClass("border-danger") ||
    $("#titulo").hasClass("border-danger") ||
    $("#descripcion").hasClass("border-danger") ||
    $("#perfil").hasClass("border-danger")
  ) {
    $("#btnGuarCarrera").prop("disabled", true);
  } else {
    $("#btnGuarCarrera").prop("disabled", false);
  }
}, 200);
setInterval(() => {
  if (
    $("#univEdit").hasClass("border-danger") ||
    $("#facuEdit").hasClass("border-danger") ||
    $("#nombreEdit").hasClass("border-danger") ||
    $("#duracionEdit").hasClass("border-danger") ||
    $("#gradoEdit").hasClass("border-danger") ||
    $("#tituloEdit").hasClass("border-danger") ||
    $("#descripcionEdit").hasClass("border-danger") ||
    $("#perfilEdit").hasClass("border-danger")
  ) {
    $("#btnEditarCarrera").prop("disabled", true);
  } else {
    $("#btnEditarCarrera").prop("disabled", false);
  }
}, 200);
// ********** VALIDAR MODAL EDITAR ***************
// ######## LLENAR DATA TABLE ############
$(document).ready(function () {
  // Listar tabla con datos
  let dataTable = $("#table").DataTable({
    ajax: {
      url: "?method=carreraGList",
      method: "GET",
    },
    columns: [
      { data: "indice" },
      { data: "univ" },
      { data: "facu" },
      { data: "nombre" },
      { data: "grado" },
      // descripcion
      {
        data: "descripcion",
        render: function (data, type, row) {
          if (row.descripcion != "") {
            return `<button type="button" class="descripcion btn btn-info btn-sm" data-toggle="modal" data-target="#modalDescripcion"><i class="text-white fs-5 fab fa-readme"></i></button>`;
          }
        },
      },
      // perfil
      {
        data: "perfil",
        render: function (data, type, row) {
          if (row.perfil != "") {
            return `<button type="button" class="perfil btn btn-success btn-sm" data-toggle="modal" data-target="#modalPerfil"><i class="fs-5 fas fa-plus-circle"></i></button>`;
          }
        },
      },
      // plan de estudio
      {
        data: "plan_estudio",
        render: function (data, type, row) {
          if (row.plan_estudio != "" && row.plan_estudio != null) {
            return `<a href="../assets/plan_estudios_pdf/${row.plan_estudio}" target="_blank"><i class="text-success fs-5 fas fa-file-pdf"></i></a>`;
          } else {
            return `<i class="text-danger fs-5 fas fa-times-circle"></i>`;
          }
        },
      },
      // Opciones
      // plan de estudio
      {
        data: "estado",
        render: function (data, type, row) {
          if (row.estado == "activo") {
            return `<button type="button" class="editar btn btn-warning btn-sm" data-toggle="modal" data-target="#modalEditarCarrera"><i class="fas fa-edit"></i></button>
          <button type="button" class="inhabilitar btn btn-danger btn-sm" data-toggle="modal" data-target="#modalInhabilitarCarrera"><i class="fas fa-trash-alt"></i></button>`;
          } else {
            return `<button type="button" class="editar btn btn-warning btn-sm" data-toggle="modal" data-target="#modalEditarCarrera"><i class="fas fa-edit"></i></button>
          <button type="button" class="habilitar btn btn-success btn-sm" data-toggle="modal" data-target="#modalHabilitarCarrera"><i class="fas fa-check-circle"></i></button>`;
          }
        },
      },
    ],
    language: español,
  });
  // Modal ver descripcion datos correspondientes
  $("#table tbody").on("click", ".descripcion", function () {
    let data = dataTable.row($(this).parents()).data();
    $("#leer_descripcion").text(data.descripcion);
  });
  // Modal ver perfil datos correspondientes
  $("#table tbody").on("click", ".perfil", function () {
    let data = dataTable.row($(this).parents()).data();
    $("#leer_perfil").text(data.perfil);
  });
  // Proceso de guardar Carrera
  $("#btnGuarCarrera").click(function () {
    formData = new FormData();
    formData.append("univ", $("#univ").val());
    formData.append("facu", $("#facu").val());
    formData.append("nombre", $("#nombre").val().toUpperCase());
    formData.append("duracion", $("#duracion").val());
    formData.append("grado", $("#grado").val().toUpperCase());
    formData.append("titulo", $("#titulo").val().toUpperCase());
    formData.append("descripcion", $("#descripcion").val());
    formData.append("perfil", $("#perfil").val());
    formData.append("planEstudio", $("#planEstudio")[0].files[0]);
    window.$.ajax({
      type: "post",
      url: "?method=carreraGSave",
      data: formData,
      cache: false,
      processData: false,
      contentType: false,
      beforeSend: function () {
        Swal.fire({
          allowOutsideClick: false,
          title: "Cargando",
          timerProgressBar: true,
          didOpen: () => {
            Swal.showLoading();
            const b = Swal.getHtmlContainer().querySelector("b");
            timerInterval = setInterval(() => {}, 300);
          },
        });
      },
      success: function (response) {
        Swal.close();
        let data = JSON.parse(response);
        if (data.estado == "ok") {
          dataTable.ajax.reload();
          $("#nombnombrere").val("");
          $("#duracion").val("");
          $("#grado").val("");
          $("#titulo").val("");
          $("#descripcion").val("");
          $("#perfil").val("");
          $("#planEstudio").val("");
          $("#modalRegistrarCarrera").hide();
          $(".modal-backdrop").remove();
          Swal.fire({
            text: data.mensaje,
            icon: "success",
          });
          setTimeout(() => {
            Swal.close();
          }, 1200);
        } else {
          Swal.fire({
            text: data.mensaje,
            icon: "error",
          });
          setTimeout(() => {
            Swal.close();
          }, 1200);
        }
      },
    });
  });
  // Modal editar Carrera con datos correspondientes
  $("#table tbody").on("click", ".editar", function () {
    let data = dataTable.row($(this).parents()).data();
    window.$.ajax({
      type: "GET",
      url: "UniversidadController.php?method=universidadGListActivos",
      success: function (response) {
        let universidades = JSON.parse(response);
        contenido =
          "<option value='0'>----- SELECCIONE UNIVERSIDAD -----</option>";
        universidades.forEach((univ) => {
          contenido += `<option value=${univ.id_universidad}>${univ.nombre}</option>`;
        });
        $("#univEdit").html(contenido);
        if (data.id_univ != "0") {
          $("#univEdit").val(data.id_univ);
          $("#univEdit").removeClass("border border-danger");
          $("#univEdit").addClass("border border-success");
        } else {
          $("univEdit").val("0");
        }
      },
    });
    if (data.nombre != "") {
      $("#nombreEdit").removeClass("border border-danger");
      $("#nombreEdit").addClass("border border-success");
      $("#nombreEdit").val(data.nombre);
    }
    if (data.duracion != "") {
      $("#duracionEdit").removeClass("border border-danger");
      $("#duracionEdit").addClass("border border-success");
      $("#duracionEdit").val(data.duracion);
    }
    if (data.grado != "") {
      $("#gradoEdit").removeClass("border border-danger");
      $("#gradoEdit").addClass("border border-success");
      $("#gradoEdit").val(data.grado);
    }
    if (data.titulo != "") {
      $("#tituloEdit").removeClass("border border-danger");
      $("#tituloEdit").addClass("border border-success");
      $("#tituloEdit").val(data.titulo);
    }
    if (data.descripcion != "") {
      $("#descripcionEdit").removeClass("border border-danger");
      $("#descripcionEdit").addClass("border border-success");
      $("#descripcionEdit").val(data.descripcion);
    }
    if (data.perfil != "") {
      $("#perfilEdit").removeClass("border border-danger");
      $("#perfilEdit").addClass("border border-success");
      $("#perfilEdit").val(data.perfil);
    }
    if (data.plan_estudio != "" && data.plan_estudio != null) {
      $("#divPlanEdit").removeClass("border border-warning");
      $("#divPlanEdit").addClass("border border-success");
      $("#plan_existe").text("(Existe)");
    } else {
      $("#divPlanEdit").removeClass("border border-success");
      $("#divPlanEdit").addClass("border border-warning");
      $("#plan_existe").text("(No Existe)");
    }
    $("#id_carrera").val(data.id_carrera);
  });
  $("#table tbody").on("click", ".editar", function () {
    let data = dataTable.row($(this).parents()).data();
    formData = new FormData();
    formData.append("id_univ", data.id_univ);
    window.$.ajax({
      type: "post",
      url: "FacultadController.php?method=facultadGListEspecifico",
      data: formData,
      cache: false,
      processData: false,
      contentType: false,
      success: function (response) {
        let facultades = JSON.parse(response);
        contenido = "<option value='0'>--- Facultad ---</option>";
        facultades.forEach((depa) => {
          contenido += `<option value=${depa.id_facultad}>${depa.nombre}</option>`;
        });
        $("#facuEdit").html(contenido);
        if (data.id_facu != "0") {
          $("#facuEdit").prop("disabled", false);
          $("#facuEdit").removeClass("border border-danger");
          $("#facuEdit").addClass("border border-success");
          $("#facuEdit").val(data.id_facu);
        } else {
          $("#facuEdit").val("0");
        }
      },
    });
  });
  // Proceso de editar Carrera
  $("#btnEditarCarrera").click(function () {
    formData = new FormData();
    formData.append("id_carrera", $("#id_carrera").val());
    formData.append("id_univ", $("#univEdit").val());
    formData.append("id_facu", $("#facuEdit").val());
    formData.append("nombre", $("#nombreEdit").val().toUpperCase());
    formData.append("duracion", $("#duracionEdit").val());
    formData.append("grado", $("#gradoEdit").val().toUpperCase());
    formData.append("titulo", $("#tituloEdit").val().toUpperCase());
    formData.append("descripcion", $("#descripcionEdit").val());
    formData.append("perfil", $("#perfilEdit").val());
    formData.append("planEstudio", $("#planEstudioEdit")[0].files[0]);
    window.$.ajax({
      type: "post",
      url: "?method=carreraGEdit",
      data: formData,
      cache: false,
      processData: false,
      contentType: false,
      beforeSend: function () {
        Swal.fire({
          allowOutsideClick: false,
          title: "Cargando",
          timerProgressBar: true,
          didOpen: () => {
            Swal.showLoading();
            const b = Swal.getHtmlContainer().querySelector("b");
            timerInterval = setInterval(() => {}, 300);
          },
        });
      },
      success: function (response) {
        Swal.close();
        let data = JSON.parse(response);
        if (data.estado == "ok") {
          dataTable.ajax.reload();
          $("#planEstudioEdit").val("");
          $("#planEstudioEdit").removeClass("border border-success");
          $("#planEstudioEdit").removeClass("border border-danger");
          $("#planEstudioEdit").removeClass("border border-warning");
          $("#planEstudioEdit").addClass("border border-warning");
          $("#modalEditarCarrera").hide();
          $(".modal-backdrop").remove();
          Swal.fire({
            text: data.mensaje,
            icon: "success",
          });
          setTimeout(() => {
            Swal.close();
          }, 2500);
        } else {
          Swal.fire({
            text: data.mensaje,
            icon: "error",
          });
          setTimeout(() => {
            Swal.close();
          }, 2500);
        }
      },
    });
  });
  // Modal Inhabilitar Carrera con datos correspondientes
  $("#table tbody").on("click", ".inhabilitar", function () {
    let data = dataTable.row($(this).parents()).data();
    $("#nombreCarreraInhabilitar").text(data.nombre);
    $("#idCarreraInhabilitar").val(data.id_carrera);
  });
  // Modal habilitar Carrera con datos correspondientes
  $("#table tbody").on("click", ".habilitar", function () {
    let data = dataTable.row($(this).parents()).data();
    $("#nombreCarreraHabilitar").text(data.nombre);
    $("#idCarreraHabilitar").val(data.id_carrera);
  });
  // Proceso de inhabilitar Carrera
  $("#btnInhabilitar").click(function (e) {
    let formData = new FormData();
    formData.append("id_carrera", $("#idCarreraInhabilitar").val());
    window.$.ajax({
      type: "post",
      url: "?method=carreraGInhabilitar",
      data: formData,
      cache: false,
      processData: false,
      contentType: false,
      beforeSend: function () {
        Swal.fire({
          allowOutsideClick: false,
          title: "Cargando",
          timerProgressBar: true,
          didOpen: () => {
            Swal.showLoading();
            const b = Swal.getHtmlContainer().querySelector("b");
            timerInterval = setInterval(() => {}, 300);
          },
        });
      },
      success: function (response) {
        Swal.close();
        let data = JSON.parse(response);
        if (data.estado == "ok") {
          dataTable.ajax.reload();
          $("#modalInhabilitarCarrera").hide();
          $(".modal-backdrop").remove();
          Swal.fire({
            text: data.mensaje,
            icon: "success",
          });
          setTimeout(() => {
            Swal.close();
          }, 2500);
        } else {
          Swal.fire({
            text: data.mensaje,
            icon: "error",
          });
          setTimeout(() => {
            Swal.close();
          }, 2500);
        }
      },
    });
  });
  // Proceso de habilitar Carrera
  $("#btnHabilitar").click(function (e) {
    let formData = new FormData();
    formData.append("id_carrera", $("#idCarreraHabilitar").val());
    window.$.ajax({
      type: "post",
      url: "?method=carreraGHabilitar",
      data: formData,
      cache: false,
      processData: false,
      contentType: false,
      beforeSend: function () {
        Swal.fire({
          allowOutsideClick: false,
          title: "Cargando",
          timerProgressBar: true,
          didOpen: () => {
            Swal.showLoading();
            const b = Swal.getHtmlContainer().querySelector("b");
            timerInterval = setInterval(() => {}, 300);
          },
        });
      },
      success: function (response) {
        Swal.close();
        let data = JSON.parse(response);
        if (data.estado == "ok") {
          dataTable.ajax.reload();
          $("#modalHabilitarCarrera").hide();
          $(".modal-backdrop").remove();
          Swal.fire({
            text: data.mensaje,
            icon: "success",
          });
          setTimeout(() => {
            Swal.close();
          }, 2500);
        } else {
          Swal.fire({
            text: data.mensaje,
            icon: "error",
          });
          setTimeout(() => {
            Swal.close();
          }, 2500);
        }
      },
    });
  });
});
